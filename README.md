# üöÄ Premium Trading Strategy Backtester

**–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫ —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π IBS** - –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –≤–∞—à–∏ —Ç–æ—Ä–≥–æ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤ data-driven –∏–Ω—Å–∞–π—Ç—ã

## üöÄ –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–ï (4 —É—Ä–æ–≤–Ω—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏)

### üõ°Ô∏è –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–û –ù–ê–î–ï–ñ–ù–û–ï –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–ï
**–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ - –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –¢–û–õ–¨–ö–û —Å–≤–µ–∂–∏–π –∫–æ–¥ –∏–∑ GitHub**
```bash
./super-reliable-deploy.sh
```
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º –∫–æ–º–º–∏—Ç–æ–º GitHub
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã
- ‚úÖ –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –±–µ–∑ –∫—ç—à–∞
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ –≤–µ—Ä—Å–∏–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å —Å–±–æ—Ä–∫–∏

### ‚ö° –ë–´–°–¢–†–û–ï –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–ï
**–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**
```bash
./quick-deploy.sh
```
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –°–æ–±–∏—Ä–∞–µ—Ç ‚Üí —É–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç ‚Üí –∑–∞–≥—Ä—É–∂–∞–µ—Ç ‚Üí –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ—Ç ‚úÖ

### üîß –° –ü–û–î–†–û–ë–ù–´–ú –í–´–í–û–î–û–ú
**–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**
```bash
./deploy-to-server.sh
```
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –¢–æ –∂–µ —Å–∞–º–æ–µ, –Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞–∂–¥—ã–π —à–∞–≥

### ü§ñ –° –£–ú–ù–´–ú–ò –ü–†–û–í–ï–†–ö–ê–ú–ò (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
./deploy.sh        # –£–º–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å –±—ç–∫–∞–ø–∞–º–∏
./health-check.sh  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã
```

---

# üèóÔ∏è Trading Strategies Backtester - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

## üìç –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–ê–Ø –°–¢–†–£–ö–¢–£–†–ê (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ –ø—Ä–æ–µ–∫—Ç–µ):

```
stonks/
‚îú‚îÄ‚îÄ server/
‚îÇ   ‚îú‚îÄ‚îÄ .env                    # ‚Üê –í–°–ï —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ .env.example           # ‚Üê –®–∞–±–ª–æ–Ω (–≤ Git)
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ docker-compose.yml         # ‚Üê –¢–æ–ª—å–∫–æ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
‚îî‚îÄ‚îÄ ...
```

#### 1Ô∏è‚É£ `server/.env` - –í–°–ï —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
```env
# –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
ADMIN_USERNAME=your_email@example.com
ADMIN_PASSWORD=your_secure_password

# API –∫–ª—é—á–∏
ALPHA_VANTAGE_API_KEY=your_key
FINNHUB_API_KEY=your_key
TELEGRAM_BOT_TOKEN=your_token

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
FRONTEND_ORIGIN=https://tradingibs.site
BUILD_ID=prod-20250826-0348
PREFERRED_API_PROVIDER=alpha_vantage
```

#### 2Ô∏è‚É£ `docker-compose.yml` - –¢–û–õ–¨–ö–û —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
```yaml
environment:
  - PORT=3001                      # –°–∏—Å—Ç–µ–º–Ω—ã–π –ø–æ—Ä—Ç
  - DATASETS_DIR=/data/datasets   # –ü—É—Ç–∏ –∫ —Ç–æ–º–∞–º
  - SETTINGS_FILE=/data/state/settings.json
  # ‚ùå –ù–ï —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ!
```

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:

- **`.env` —Ñ–∞–π–ª—ã –ù–ò–ö–û–ì–î–ê –Ω–µ –∫–æ–º–º–∏—Ç—è—Ç—Å—è –≤ Git**
- **–°–µ–∫—Ä–µ—Ç–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ –≤ `server/.env`**
- **Docker-compose —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**

### üö® –†–∞–Ω–µ–µ –±—ã–ª–∞ –ø—Ä–æ–±–ª–µ–º–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è:

**‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–±—ã–ª–∞ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è):**
```yaml
# server/.env
ADMIN_USERNAME=user
ADMIN_PASSWORD=pass

# docker-compose.yml (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ!)
environment:
  - ADMIN_USERNAME=${ADMIN_USERNAME}  # –ö–æ–Ω—Ñ–ª–∏–∫—Ç!
  - ADMIN_PASSWORD=${ADMIN_PASSWORD}  # –ö–æ–Ω—Ñ–ª–∏–∫—Ç!
```

**‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (—Å–µ–π—á–∞—Å):**
```yaml
# server/.env - –í–°–ï —Å–µ–∫—Ä–µ—Ç—ã
ADMIN_USERNAME=user
ADMIN_PASSWORD=pass

# docker-compose.yml - –¢–æ–ª—å–∫–æ —Å–∏—Å—Ç–µ–º–Ω—ã–µ
environment:
  - PORT=3001
  - DATASETS_DIR=/data/datasets
```

---

# üö® –í–ê–ñ–ù–û: –ü—Ä–æ–±–ª–µ–º–∞ –ø–æ—Ç–µ—Ä–∏ —Ñ–∞–π–ª–æ–≤ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–æ–¥–∞

## ‚ùå –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏:

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `rm -rf *` –¥–ª—è –∑–∞–º–µ–Ω—ã –∫–æ–¥–∞ —Ç–µ—Ä—è—é—Ç—Å—è:

- **node_modules/** - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (400+ –ø–∞–∫–µ—Ç–æ–≤, ~500MB)
- **dist/** - —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- **server/.env** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ (–ø–∞—Ä–æ–ª–∏, API –∫–ª—é—á–∏)
- **caddy/Caddyfile** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
- **docker-compose.yml** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker
- **Docker volumes** - –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –∫—ç—à
- ***.tar.gz –±—ç–∫–∞–ø—ã**

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–º–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
# –í–º–µ—Å—Ç–æ —Ä—É—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
./smart-update.sh

# –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
# ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å–µ –≤–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã
# ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
# ‚úÖ –°–æ–∑–¥–∞–µ—Ç –±—ç–∫–∞–ø –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
# ‚úÖ –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
```

## üìã –ß—Ç–æ –¥–µ–ª–∞–µ—Ç smart-update.sh:

1. **–°–æ–∑–¥–∞–µ—Ç –±—ç–∫–∞–ø** –≤–∞–∂–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
2. **–°–∫–∞—á–∏–≤–∞–µ—Ç** –Ω–æ–≤—ã–π –∫–æ–¥ —Å GitHub
3. **–û–±–Ω–æ–≤–ª—è–µ—Ç** —Ç–æ–ª—å–∫–æ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ (src/)
4. **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç** –≤—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
5. **–ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç** frontend
6. **–ó–∞–ø—É—Å–∫–∞–µ—Ç** —Å–µ—Ä–≤–∏—Å—ã

## üîß –†—É—á–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ (–µ—Å–ª–∏ —Ñ–∞–π–ª—ã —É–∂–µ –ø–æ—Ç–µ—Ä—è–Ω—ã):

```bash
# 1. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –±—ç–∫–∞–ø–∞
cd ~/backups
tar -xzf stonks_backup_YYYYMMDD_HHMMSS.tar.gz -C ~/stonks

# 2. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å smart-update.sh
./smart-update.sh
```

---

## Trading Strategies Backtester (React + TypeScript + Vite)

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –≤–µ–±‚Äë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É CSV, –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–π, –±—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥, –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –≥—Ä–∞—Ñ–∏–∫–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ `lightweight-charts`, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞—Ç–∞—Å–µ—Ç–æ–≤ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–ª–∏—Ç–∞–º–∏ –∏ e2e/—é–Ω–∏—Ç‚Äë—Ç–µ—Å—Ç—ã.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö**: –∏–º–ø–æ—Ä—Ç CSV (–ø—Ä–∏–º–µ—Ä –≤ `public/sample-data.csv`), –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏
- **–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å—Ç—Ä–∞—Ç–µ–≥–∏–π**: –≥–æ—Ç–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ —É—Å–ª–æ–≤–∏—è
- **IBS Mean Reversion**: —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è IBS –∏ —á–∏—Å—Ç—ã–π —Ä–µ–∂–∏–º –±—ç–∫—Ç–µ—Å—Ç–∞
- **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è**: —Å–≤–µ—á–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫ —Ü–µ–Ω—ã, –ª–∏–Ω–∏—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏, –º–µ—Ç—Ä–∏–∫–∏, –∂—É—Ä–Ω–∞–ª —Å–¥–µ–ª–æ–∫
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞—Ç–∞—Å–µ—Ç–æ–≤**: –ª–æ–∫–∞–ª—å–Ω—ã–π Express‚Äë—Å–µ—Ä–≤–µ—Ä (`server/`) —Å REST API –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π –¥–∞—Ç–∞—Å–µ—Ç–æ–≤
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–ª–∏—Ç–∞–º–∏**: –ø—Ä–æ—Å–º–æ—Ç—Ä/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–ª–∏—Ç‚Äë—Å–æ–±—ã—Ç–∏–π –ø–æ —Ç–∏–∫–µ—Ä–∞–º
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram**: –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∑–∞ —Ç–∏–∫–µ—Ä–∞–º–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: Vitest (—é–Ω–∏—Ç) –∏ Playwright (e2e + a11y‚Äë–∞—É–¥–∏—Ç—ã)

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Node.js 18+ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 18 –∏–ª–∏ 20)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥)
```bash
npm install
```

### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
```bash
npm run dev
```
–û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:5173` (–ø–æ—Ä—Ç –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è; –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ).

### –°–±–æ—Ä–∫–∞ –∏ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä (–¥–ª—è e2e –∏ –ø—Ä–æ–¥‚Äë—Ä–µ–∂–∏–º–∞)
```bash
npm run build
npm run preview
```
–ü—Ä–µ–≤—å—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∞ `http://localhost:4173`.

## –õ–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è –¥–∞—Ç–∞—Å–µ—Ç–æ–≤

–§–∞–∫—É–ª—å—Ç–∞—Ç–∏–≤–Ω—ã–π –±—ç–∫–µ–Ω–¥ –≤ `server/` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å/–∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–∞—Ç–∞—Å–µ—Ç—ã, —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–ø–ª–∏—Ç–∞–º–∏ –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (quote API, Telegram).

1) –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫:
```bash
cd server
npm install
npm run dev
```
–°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:3001`.

2) –ë–∞–∑–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã API:
- `GET /api/status` ‚Äî —Å—Ç–∞—Ç—É—Å
- `GET /api/datasets` ‚Äî —Å–ø–∏—Å–æ–∫ –¥–∞—Ç–∞—Å–µ—Ç–æ–≤ (–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ)
- `GET /api/datasets/:id` ‚Äî –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç —Å –¥–∞–Ω–Ω—ã–º–∏
- `POST /api/datasets` ‚Äî —Å–æ–∑–¥–∞—Ç—å
- `PUT /api/datasets/:id` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å
- `DELETE /api/datasets/:id` ‚Äî —É–¥–∞–ª–∏—Ç—å

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:
- `POST /api/datasets/:id/refresh?provider=alpha_vantage|finnhub` ‚Äî –¥–æ–∑–∞–≥—Ä—É–∑–∫–∞ —Ö–≤–æ—Å—Ç–∞
- `GET /api/quote/:symbol?provider=alpha_vantage|finnhub` ‚Äî –∫–æ—Ç–∏—Ä–æ–≤–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- `GET /api/splits` ‚Äî –∫–∞—Ä—Ç–∞ –≤—Å–µ—Ö —Å–ø–ª–∏—Ç–æ–≤ –ø–æ —Ç–∏–∫–µ—Ä–∞–º
- `GET/PUT/PATCH/DELETE /api/splits/:symbol[/date]` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–ª–∏—Ç–∞–º–∏
- `POST /api/telegram/notify`, `POST /api/telegram/test` ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω Telegram)
- `POST /api/auth/login`, `GET /api/auth/check`, `POST /api/auth/logout` ‚Äî –±–∞–∑–æ–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

3) –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞ (–ø—Ä–∏–º–µ—Ä `server/.env` –¥–ª—è –ª–æ–∫–∞–ª–∫–∏):
```env
PORT=3001
# –†–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-–æ—Ä–∏–≥–∏–Ω –¥–ª—è CORS (dev):
FRONTEND_ORIGIN=http://localhost:5173
# –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–µ—Å–ª–∏ ADMIN_PASSWORD –ø—É—Å—Ç, auth –æ—Ç–∫–ª—é—á–µ–Ω–∞ –≤ dev; –≤ prod ‚Äî –∑–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω—ã):
ADMIN_USERNAME=admin@example.com
ADMIN_PASSWORD=
# Telegram (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=
# –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã —Ä—ã–Ω. –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
ALPHA_VANTAGE_API_KEY=
FINNHUB_API_KEY=
TWELVE_DATA_API_KEY=
POLYGON_API_KEY=
```

## –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose

### 1) –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker –∏ Docker Compose
- –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `server/.env` (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Docker secrets). –ü—Ä–∏–º–µ—Ä: `server/.env.example`.
- –ù–∏–∫–∞–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –∫–æ–Ω—Ñ–∏–≥–æ–≤ –±–æ–ª—å—à–µ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ git: –æ–Ω–∏ –∂–∏–≤—É—Ç –≤ Docker‚Äë—Ç–æ–º–∞—Ö.

### 2) –°—Ç–∞—Ä—Ç (prod)
```
docker compose pull
docker compose up -d
```
- –§—Ä–æ–Ω—Ç–µ–Ω–¥: `http://localhost/`
- API: `/api/*` ‚Üí –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `server:3001`

–î–∞–Ω–Ω—ã–µ –∏ –∫–æ–Ω—Ñ–∏–≥–∏ –∂–∏–≤—É—Ç –≤ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã—Ö —Ç–æ–º–∞—Ö Docker: `stonks_datasets` –∏ `stonks_state`. Git‚Äë–æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ç–æ–º–æ–≤.

### 3) –°—Ç–∞—Ä—Ç (dev)
–ü—Ä–æ—Ñ–∏–ª—å `dev` –æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–µ bind‚Äëmount‚Äô—ã –≤ —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:
```
docker compose --profile dev up --build -d
```

### 4) –û—Å—Ç–∞–Ω–æ–≤–∫–∞
```
docker compose down
```

–ü—Ä–∏–º–µ—á–∞–Ω–∏—è
- Nginx –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç SPA –Ω–∞ –∫–æ—Ä–Ω–µ `/` –∏ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç `/api` –Ω–∞ —Å–µ—Ä–≤–∏—Å `server`.
- –ü—É—Ç—å –ª–æ–≥–∏–Ω–∞: `/login/`. –ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ `ADMIN_PASSWORD` –∑–∞—â–∏—Ç–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞ –≤ dev, –≤ prod ‚Äî API –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å 503 –¥–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
- –î–ª—è –ø—Ä–æ–¥‚Äë—Ä–µ–∂–∏–º–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –≤–Ω–µ—à–Ω–∏–π –ø—Ä–æ–∫—Å–∏ —Å HTTPS (–Ω–∞–ø—Ä–∏–º–µ—Ä, Caddy/Traefik) –ø–æ–≤–µ—Ä—Ö —Å–µ—Ä–≤–∏—Å–∞ `frontend`.

### –ü—É—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –º–∏–≥—Ä–∞—Ü–∏—è
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø—É—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –∑–∞–¥–∞—é—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
  - `DATASETS_DIR=/data/datasets`
  - `SETTINGS_FILE=/data/state/settings.json`
  - `WATCHES_FILE=/data/state/telegram-watches.json`
  - `SPLITS_FILE=/data/state/splits.json`
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º —Å—Ç–∞—Ä—Ç–µ, –µ—Å–ª–∏ —Ç–æ–º –ø—É—Å—Ç–æ–π, entrypoint –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é:
  - –ö–æ–ø–∏—Ä—É–µ—Ç `server/datasets` ‚Üí `/data/datasets`
  - –ö–æ–ø–∏—Ä—É–µ—Ç `server/settings.json`, `telegram-watches.json`, `splits.json` ‚Üí `/data/state/*`

### Secrets
- –î–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ —Å–ª—É—á–∞—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `env_file: server/.env` (—Å–º. –ø—Ä–∏–º–µ—Ä `server/.env.example`).
- –î–ª—è –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Docker secrets –∏ –º–æ–Ω—Ç–∏—Ä—É–π—Ç–µ –∏—Ö –≤ `/run/secrets/*` (entrypoint –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∑–∏—Ç –∑–Ω–∞—á–µ–Ω–∏—è, –µ—Å–ª–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞).
- –ù–µ –¥—É–±–ª–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —Å–µ–∫—Ü–∏–∏ `environment`, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–±–∏—Ç—å `env_file`.

### –ë—ç–∫–∞–ø—ã —Ç–æ–º–æ–≤
```
# –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è
docker run --rm -v stonks_datasets:/v -v $(pwd):/b busybox sh -c 'cd /v && tar czf /b/stonks_datasets.tgz .'
docker run --rm -v stonks_state:/v -v $(pwd):/b busybox sh -c 'cd /v && tar czf /b/stonks_state.tgz .'

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
docker run --rm -v stonks_datasets:/v -v $(pwd):/b busybox sh -c 'cd /v && tar xzf /b/stonks_datasets.tgz'
docker run --rm -v stonks_state:/v -v $(pwd):/b busybox sh -c 'cd /v && tar xzf /b/stonks_state.tgz'
```

## –†–µ–∞–ª—å–Ω—ã–µ —Ä—ã–Ω–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–°–µ—Ä–≤–µ—Ä —É–º–µ–µ—Ç –ø–æ–¥—Ç—è–≥–∏–≤–∞—Ç—å –∫–æ—Ç–∏—Ä–æ–≤–∫–∏ –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (Alpha Vantage, Finnhub, Twelve Data, Polygon):
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–ª—é—á–∏ –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–ª–æ–∫–∞–ª—å–Ω–æ –≤ `server/.env`, –ª–∏–±–æ –≤ –∫–æ—Ä–Ω–µ–≤–æ–º `.env` –¥–ª—è Docker):
```env
ALPHA_VANTAGE_API_KEY=...
FINNHUB_API_KEY=...
TWELVE_DATA_API_KEY=...
POLYGON_API_KEY=...
```
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞ API (—Å–º. `src/lib/api.ts`) –∏–ª–∏ UI.

–ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–ª—é—á–µ–π —Å–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—ë—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏, —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç fallback‚Äë–ø–æ–≤–µ–¥–µ–Ω–∏–µ.

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –Æ–Ω–∏—Ç‚Äë—Ç–µ—Å—Ç—ã (Vitest)
```bash
npm run test        # –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ
npm run test:run    # –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π –ø—Ä–æ–≥–æ–Ω
```

### E2E‚Äë—Ç–µ—Å—Ç—ã (Playwright)
```bash
# –û–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±—Ä–∞—É–∑–µ—Ä—ã
npx playwright install

# –ó–∞–ø—É—Å–∫ e2e
npm run test:e2e

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä
npm run test:e2e:chromium
npm run test:e2e:firefox
npm run test:e2e:webkit

# UI‚Äë—Ä–µ–∂–∏–º
npm run test:e2e:ui
```
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ‚Äî `playwright.config.ts`. –î–ª—è e2e –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å–±–æ—Ä–∫–∞ –∏ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä (`npm run build && npm run preview`) –Ω–∞ `http://localhost:4173`.

## –°–∫—Ä–∏–ø—Ç—ã npm (–∫–æ—Ä–µ–Ω—å)
- `dev`: –∑–∞–ø—É—Å–∫ dev‚Äë—Å–µ—Ä–≤–µ—Ä–∞ Vite
- `build`: —Å–±–æ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `build:check`: —Ç–∏–ø–∏–∑–∞—Ü–∏—è + —Å–±–æ—Ä–∫–∞
- `preview`: –ª–æ–∫–∞–ª—å–Ω—ã–π –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å–±–æ—Ä–∫–∏
- `lint`: –∑–∞–ø—É—Å–∫ ESLint
- `test`, `test:run`: —é–Ω–∏—Ç‚Äë—Ç–µ—Å—Ç—ã (Vitest)
- `test:e2e*`: e2e‚Äë—Ç–µ—Å—Ç—ã (Playwright)
- `test:all`: —é–Ω–∏—Ç + e2e
- `test:ci`: —Ä–µ–∂–∏–º –¥–ª—è CI

–°–∫—Ä–∏–ø—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞ ‚Äî –≤ `server/package.json` (`dev`, `start`).

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
trading_strategies/
‚îú‚îÄ‚îÄ src/                    # —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (React + TS)
‚îÇ   ‚îú‚îÄ‚îÄ components/         # UI‚Äë–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–≥—Ä–∞—Ñ–∏–∫–∏, —Ñ–æ—Ä–º—ã, –¥–∞—à–±–æ—Ä–¥, —Å–ø–ª–∏—Ç—ã, Telegram)
‚îÇ   ‚îú‚îÄ‚îÄ lib/                # –ª–æ–≥–∏–∫–∞ –±—ç–∫—Ç–µ—Å—Ç–∞, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã, –º–µ—Ç—Ä–∏–∫–∏, API‚Äë–∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ stores/             # —Å–æ—Å—Ç–æ—è–Ω–∏–µ (zustand)
‚îÇ   ‚îî‚îÄ‚îÄ types/              # —Ç–∏–ø—ã
‚îú‚îÄ‚îÄ server/                 # Express‚Äë—Å–µ—Ä–≤–µ—Ä (–¥–∞—Ç–∞—Å–µ—Ç—ã, —Å–ø–ª–∏—Ç—ã, quotes, Telegram, auth)
‚îú‚îÄ‚îÄ public/                 # —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (–≤ —Ç.—á. sample CSV)
‚îú‚îÄ‚îÄ docker/                 # Dockerfile —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞, nginx.conf
‚îú‚îÄ‚îÄ README.md               # —ç—Ç–æ—Ç —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ ...                     # –∫–æ–Ω—Ñ–∏–≥–∏, –æ—Ç—á—ë—Ç—ã —Ç–µ—Å—Ç–æ–≤, —Å–∫—Ä–∏–ø—Ç—ã
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- `VITE_BUILD_ID` ‚Äî –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Ñ—É—Ç–µ—Ä–µ –∫–∞–∫ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–±–æ—Ä–∫–∏
- –ü—Ä–∏ —Å–±–æ—Ä–∫–µ —á–µ—Ä–µ–∑ Docker –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∞–∑–æ–≤—ã–π –ø—É—Ç—å `/` –∏ –ø—Ä–æ–∫—Å–∏ `/api`
- –ö–ª–∏–µ–Ω—Ç `src/lib/api.ts` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π `/api` –±–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ —Å—É–±–ø—É—Ç–∏

## –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- React 19, TypeScript 5, Vite 7, Tailwind CSS
- Zustand, clsx, lucide‚Äëreact, papaparse, lightweight‚Äëcharts
- Vitest, Testing Library, Playwright, axe‚Äëcore

## –õ–∏—Ü–µ–Ω–∑–∏—è
–ù–µ —É–∫–∞–∑–∞–Ω–∞.

## –ü—Ä–æ–¥–æ–≤—ã–π –¥–µ–ø–ª–æ–π —Å HTTPS —á–µ—Ä–µ–∑ Caddy

–í –∫–æ—Ä–Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω `docker-compose.yml` —Å —Ç—Ä–µ–º—è —Å–µ—Ä–≤–∏—Å–∞–º–∏: `server`, `frontend`, `caddy`. Caddy –ø—Ä–∏–Ω–∏–º–∞–µ—Ç 80/443 –∏ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç:
- `/api/*` ‚Üí `server:3001`
- `/` ‚Üí `frontend:80`

`caddy/Caddyfile` (–ø—Ä–∏–º–µ—Ä –¥–ª—è –¥–æ–º–µ–Ω–∞ `example.com`):
```
example.com {
  encode gzip
  log {
    output file /var/log/caddy/access.log
  }
  handle_path /api/* {
    reverse_proxy server:3001
  }
  handle {
    reverse_proxy frontend:80
  }
}
```

–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–¥‚Äë—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:
```
docker compose down
docker compose up -d --build
```
–ü—Ä–æ–≤–µ—Ä–∫–∞:
- `https://example.com/` ‚Üí SPA
- `https://example.com/api/status` ‚Üí 200 ok

TLS‚Äë—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤—ã–ø—É—Å–∫–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (Let‚Äôs Encrypt) ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –Ω–µ –Ω—É–∂–Ω—ã.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–µ—Å—É—Ä—Å–∞–º –∏ —Å–±–æ—Ä–∫–µ
- –î–ª—è —Å–±–æ—Ä–∫–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –º–∏–Ω–∏–º—É–º 2 –ì–ë RAM (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ 4 –ì–ë).
- –ù–∞ —Å–ª–∞–±—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö –≤–∫–ª—é—á–∏—Ç–µ swap (2‚Äì4 –ì–ë) –ª–∏–±–æ —Å–æ–±–∏—Ä–∞–π—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –ª–æ–∫–∞–ª—å–Ω–æ/–≤ CI.
- –í Dockerfile —Ñ—Ä–æ–Ω—Ç–∞ –±–∏–ª–¥ –ø—Ä–æ—Ö–æ–¥–∏—Ç –≤ —Å—Ç–∞–¥–∏–∏ `builder` —Å `NODE_OPTIONS=--max-old-space-size=256`.
- –í runtime –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–æ–¥‚Äë–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`npm ci --omit=dev` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞; –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ dev‚Äëdeps —Å—Ç–∞–≤—è—Ç—Å—è –≤ builder‚Äë—Å—Ç–∞–¥–∏–∏).

–í–∞—Ä–∏–∞–Ω—Ç –±—ã—Å—Ç—Ä–æ–≥–æ –¥–µ–ø–ª–æ—è –±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ —Ñ—Ä–æ–Ω—Ç–∞:
- –°–æ–±–µ—Ä–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç –ª–æ–∫–∞–ª—å–Ω–æ/–≤ CI, –ø–æ–ª–æ–∂–∏—Ç–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç `dist` –≤ —Ä–µ–ª–∏–∑;
- –í `docker/frontend.Dockerfile` –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å —Å—Ç–∞–¥–∏—é —Å–±–æ—Ä–∫–∏ –Ω–∞ –ø—Ä–æ—Å—Ç–æ–π `COPY dist /usr/share/nginx/html`.

## –ü—Ä–∞–≤–∞ –∏ —Ç–æ–º–∞ —Å–µ—Ä–≤–µ—Ä–∞
- –°–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è `server/datasets` –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (uid/gid 1000). –ù–∞ —Ö–æ—Å—Ç–µ:
```
sudo chgrp -R 1000 server/datasets && sudo chmod -R 2775 server/datasets
```

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ –¥–µ–ø–ª–æ—é
- –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ –∑–∞ —Ä–µ–≤–µ—Ä—Å‚Äë–ø—Ä–æ–∫—Å–∏ —Å–µ—Ä–≤–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω `app.set('trust proxy', true)` ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è IP –∫–ª–∏–µ–Ω—Ç–∞ –¥–ª—è –ª–∏–º–∏—Ç–æ–≤ –ª–æ–≥–∏–Ω–∞. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ–∫—Å–∏ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏ `X-Forwarded-For` –∏ `X-Forwarded-Proto`.
- Cookie –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤—ã–¥–∞—é—Ç—Å—è —Å —Ñ–ª–∞–≥–∞–º–∏ `HttpOnly` –∏ `Secure` (–≤ –ø—Ä–æ–¥–µ). –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.
