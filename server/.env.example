# =============================================================================
# Trading Backtester - Environment Configuration Template
# =============================================================================
# This file serves as a template for your production .env file.
# Copy this to ~/stonks-config/.env on your server and fill in real values.
#
# IMPORTANT: Never commit the real .env file to git!
# =============================================================================

# -----------------------------------------------------------------------------
# SERVER CONFIGURATION
# -----------------------------------------------------------------------------

# Port for the Express.js backend server
PORT=3001

# Frontend origin for CORS (use actual domain in production)
# Development: http://localhost:5173
# Production:  https://yourdomain.com or leave empty to allow all origins
FRONTEND_ORIGIN=http://localhost:5173

# Node environment (development or production)
NODE_ENV=production

# -----------------------------------------------------------------------------
# AUTHENTICATION
# -----------------------------------------------------------------------------

# Admin username (email format)
ADMIN_USERNAME=admin@example.com

# Admin password (use bcrypt hash for security)
# To generate a bcrypt hash:
# 1. Start the server
# 2. POST to /api/auth/hash-password with {"password": "your_password"}
# 3. Copy the hash and paste it here
# OR use plain text password (will be compared directly, less secure)
ADMIN_PASSWORD=

# Example bcrypt hash (password: "admin123"):
# ADMIN_PASSWORD=$2b$10$abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGH

# -----------------------------------------------------------------------------
# TELEGRAM INTEGRATION
# -----------------------------------------------------------------------------

# Telegram Bot Token (get from @BotFather)
# Example: 1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_BOT_TOKEN=

# Telegram Chat ID (your personal or group chat ID)
# Example: 123456789 or -1001234567890 (for groups)
TELEGRAM_CHAT_ID=

# -----------------------------------------------------------------------------
# FINANCIAL DATA API KEYS
# -----------------------------------------------------------------------------
# You need at least ONE API key from the providers below.
# The application will fall back to settings.json if these are not set.

# Alpha Vantage (free tier: 5 API requests/minute, 500/day)
# Get your free API key at: https://www.alphavantage.co/support/#api-key
ALPHA_VANTAGE_API_KEY=

# Finnhub (free tier: 60 API calls/minute)
# Get your free API key at: https://finnhub.io/register
FINNHUB_API_KEY=

# Twelve Data (free tier: 8 API requests/minute, 800/day)
# Get your free API key at: https://twelvedata.com/pricing
# NOTE: With 4-5 tickers and default delay (15s + 2s jitter),
#       you'll use ~240 requests/day, well within the 800/day limit
TWELVE_DATA_API_KEY=

# Polygon.io (free tier: 5 API calls/minute)
# Get your free API key at: https://polygon.io/pricing
POLYGON_API_KEY=

# Preferred API provider for market data
# Options: alpha_vantage, finnhub, twelve_data, polygon
PREFERRED_API_PROVIDER=alpha_vantage

# -----------------------------------------------------------------------------
# DATA STORAGE PATHS
# -----------------------------------------------------------------------------
# These paths are used inside Docker containers.
# You typically don't need to change these unless using custom volumes.

# Directory for storing uploaded/fetched market datasets
DATASETS_DIR=/data/datasets

# Path to application settings JSON file
SETTINGS_FILE=/data/state/settings.json

# Path to Telegram watch list JSON file
WATCHES_FILE=/data/state/telegram-watches.json

# Path to stock splits JSON file
SPLITS_FILE=/data/state/splits.json

# Path to trade history JSON file (for monitoring)
TRADE_HISTORY_FILE=/data/state/trade-history.json

# Path to monitoring log file
MONITOR_LOG_PATH=/data/datasets/monitoring.log

# -----------------------------------------------------------------------------
# RATE LIMITING (TELEGRAM MONITORING)
# -----------------------------------------------------------------------------
# These settings control how fast the app makes API requests during
# automated monitoring cycles (e.g., Telegram watch list updates).

# Delay between API requests in milliseconds (default: 15000ms = 15s)
# This prevents hitting rate limits on free-tier API providers
PRICE_ACTUALIZATION_REQUEST_DELAY_MS=15000

# Random jitter added to delay to avoid rate limit spikes (default: 2000ms = 2s)
# Total delay per request = DELAY + random(0, JITTER)
PRICE_ACTUALIZATION_DELAY_JITTER_MS=2000

# With 15s delay + 2s jitter, you get ~4 requests/minute
# This is safe for ALL providers listed above

# =============================================================================
# SETUP INSTRUCTIONS
# =============================================================================
# 1. Copy this file to /home/ubuntu/stonks-config/.env on your production server
# 2. Fill in all required values (API keys, Telegram tokens, passwords)
# 3. Set file permissions: chmod 600 /home/ubuntu/stonks-config/.env
# 4. Set directory permissions: chmod 700 /home/ubuntu/stonks-config/
# 5. Recreate Docker containers: cd ~/stonks && docker compose up -d
#    IMPORTANT: Use 'up -d', NOT 'restart' - restart won't reload .env!
#
# For detailed setup instructions, see ENVIRONMENT.md in the repository.
# =============================================================================
